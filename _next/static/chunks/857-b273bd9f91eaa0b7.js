(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{59616:function(t,n,e){t=e.nmd(t),function(){function n(t,o){return o?e(51661)(t):t.slice?n[i(t)]:function(e,o){t(e={exports:{}}),n[i(o)]=e.exports};function i(t){return t.split("/").slice(-1).toString().replace(".js","")}}var o=t;n((function(t){String.random=function(t,n){var e="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t-- >0;)e+=n.charAt(Math.floor(Math.random()*n.length));return e},String.match=function(t,n){var e,o;return"string"===typeof t&&("string"==typeof n&&(n={"=":n}),t===(e=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||o===n["="]&&(e=n["*"]||n[">"],t.slice(0,(e||"").length)===e||o===n["*"]&&(o!==n[">"]&&o!==n["<"]?t>=n[">"]&&t<=n["<"]:o!==n[">"]&&t>=n[">"]||o!==n["<"]&&t<=n["<"])))},String.hash=function(t,n){if("string"===typeof t){if(n=n||0,!t.length)return n;for(var e=0,o=t.length;e<o;++e)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}};var n=Object.prototype.hasOwnProperty;Object.plain=function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(t,e){for(var o in t)if(n.call(t,o)&&(!e||-1==e.indexOf(o)))return!1;return!0},Object.keys=Object.keys||function(t){var e=[];for(var o in t)n.call(t,o)&&e.push(o);return e},function(){var t=setTimeout,n=0,e=0,o=typeof setImmediate!==""+undefined&&setImmediate||t;t.hold=t.hold||9,t.poll=t.poll||function(i){t.hold>=+new Date-n&&e++<3333?i():o((function(){n=+new Date,i()}),e=0)}}(),function(){var t,n=setTimeout,e=n.turn=n.turn||function(t){1==o.push(t)&&i(a)},o=e.s=[],i=n.poll,r=0,a=function(){(t=o[r++])&&t(),r!=o.length&&99!=r||(o=e.s=o.slice(r),r=0),o.length&&i(a)}}(),function(){var t,n=setTimeout,e=n.turn;(n.each=n.each||function(n,o,i,r){r=r||9,function a(u,s,c){if(s=(u=(n||[]).splice(0,r)).length){for(var f=0;f<s&&t===(c=o(u[f]));f++);if(t===c)return void e(a)}i&&i(c)}()})()}()}))(n,"./shim"),n((function(t){t.exports=function t(n,e,o){if(!n)return{to:t};var i="function"==typeof e;n=(this.tag||(this.tag={}))[n]||i&&(this.tag[n]={tag:n,to:t._={next:function(t){var n;(n=this.to)&&n.next(t)}}});if(i){var r={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:e,the:n,on:this,as:o};return(r.back=n.last||n).to=r,n.last=r}return(n=n.to)&&undefined!==e&&n.next(e),n}}))(n,"./onto"),n((function(t){t.exports=function(t){return null===t||"string"===typeof t||"boolean"===typeof t||"number"===typeof t&&t!=1/0&&t!=-1/0&&t===t||!!t&&"string"==typeof t["#"]&&1===Object.keys(t).length&&t["#"]}}))(n,"./valid"),n((function(t){function e(){var t=+new Date;return u<t?(r=0,u=t+e.drift):u=t+(r+=1)/a+e.drift}n("./shim"),e.drift=0;var o,i=-1/0,r=0,a=999,u=i;e.is=function(t,n,e){var o=n&&t&&t._&&t._[">"]||e;if(o)return"number"==typeof(o=o[n])?o:i},e.ify=function(t,n,e,i,r){(t=t||{})._=t._||{},r&&(t._["#"]=r);var a=t._[">"]||(t._[">"]={});return o!==n&&"_"!==n&&("number"==typeof e&&(a[n]=e),o!==i&&(t[n]=i)),t},t.exports=e}))(n,"./state"),n((function(t){n("./shim"),t.exports=function(t){var n={s:{}},e=n.s;t=t||{max:999,age:9e3},n.check=function(t){return!!e[t]&&o(t)};var o=n.track=function(o){var i=e[o]||(e[o]={});return i.was=n.now=+new Date,n.to||(n.to=setTimeout(n.drop,t.age+9)),i};return n.drop=function(o){n.to=null,n.now=+new Date;var i=Object.keys(e);console.STAT&&console.STAT(n.now,+new Date-n.now,"dup drop keys"),setTimeout.each(i,(function(i){var r=e[i];r&&(o||t.age)>n.now-r.was||delete e[i]}),0,99)},n}}))(n,"./dup"),n((function(t){n("./onto"),t.exports=function(t,n){if(this.on){var o=(this.opt||{}).lack||9e3;if("function"!=typeof t){if(!t)return;var i=t["#"]||t,r=(this.tag||"")[i];if(!r)return;return n&&(r=this.on(i,n),clearTimeout(r.err),r.err=setTimeout((function(){r.off()}),o)),!0}i=n&&n["#"]||e(9);if(!t)return i;var a=this.on(i,t,n);return a.err=a.err||setTimeout((function(){a.off(),a.next({err:"Error: No ACK yet.",lack:!0})}),o),i}};var e=String.random||function(){return Math.random().toString(36).slice(2)}}))(n,"./ask"),n((function(t){function e(t){return t instanceof e?(this._={$:this}).$:this instanceof e?e.create(this._={$:this,opt:t}):new e(t)}e.is=function(t){return t instanceof e||t&&t._&&t===t._.$||!1},e.version=.202,e.chain=e.prototype,e.chain.toJSON=function(){},n("./shim"),e.valid=n("./valid"),e.state=n("./state"),e.on=n("./onto"),e.dup=n("./dup"),e.ask=n("./ask"),function(){function t(o){if(o)if(o.out!==t){var i,r=this.as,s=r.at||r,c=s.$,f=s.dup,l=o.DBG;if((i=o["#"])||(i=o["#"]=u(9)),!f.check(i)){if(f.track(i),i=o._,o._="function"==typeof i?i:function(){},o.$&&o.$===(o.$._||"").$||(o.$=c),o["@"]&&!o.put&&function(t){var n,e=t["@"]||"";if(!(n=e._))return;n.acks=(n.acks||0)+1,(n.err=t.err)&&(t["@"]=n["#"],a(n));n.stop||n.crack||(n.crack=n.match&&n.match.push((function(){p(n)})));p(n)}(o),!s.ask(o["@"],o)){if(l&&(l.u=+new Date),o.put)return void n(o);o.get&&e.on.get(o,c)}l&&(l.uc=+new Date),this.to.next(o),l&&(l.ua=+new Date),o.nts||o.NTS||(o.out=t,s.on("out",o),l&&(l.ue=+new Date))}}else this.to.next(o)}function n(n){if(n){var e=n._||"",r=e.root=((e.$=n.$||"")._||"").root;if(n["@"]&&e.faith&&!e.miss)return n.out=t,void r.on("out",n);e.latch=r.hatch,e.match=r.hatch=[];var u=n.put,f=e.DBG=n.DBG,l=+new Date;if(d=d||l,!u["#"]||!u["."]){f&&(f.p=l),e["#"]=n["#"],e.msg=n,e.all=0,e.stun=1;var h=Object.keys(u);console.STAT&&console.STAT(l,((f||e).pk=+new Date)-l,"put sort");var p,y,k,m,_,w,$,T=0;!function t(r){if(p!=T){if(p=T,!(k=h[T]))return console.STAT&&console.STAT(l,((f||e).pd=+new Date)-l,"put"),void a(e);(m=u[k])?($=m._)?k!==$["#"]?w=g+v(k)+"soul not same.":(_=$[">"])||(w=g+v(k)+"no state."):w=g+v(k)+"no meta.":w=g+v(k)+"no node.",y=Object.keys(m||{})}if(w)return n.err=e.err=w,void a(e);var d,j=0;for(r=r||0;r++<9&&(d=y[j++]);)if("_"!==d){var x=m[d],S=_[d];if(i===S){w=g+v(d)+"on"+v(k)+"no state.";break}if(!c(x)){w=g+v(d)+"on"+v(k)+"bad "+typeof x+v(x);break}o(x,d,k,S,n),++b}(y=y.slice(j)).length?s(t):(++T,y=null,t(r))}()}}}function o(t,n,e,i,r){var a,u=r._||"",s=u.root,c=s.graph,l=c[e]||h,p=f(l,n,1),d=l[n],g=u.DBG;(a=console.STAT)&&(c[e]&&d||(a.has=(a.has||0)+1));var v=m();if(i>v)return setTimeout((function(){o(t,n,e,i,r)}),(a=i-v)>k?k:a),void(console.STAT&&console.STAT((g||u).Hf=+new Date,a,"future"));if((!(i<p)||u.miss)&&(u.faith||i!==p||!(t===d||y(t)<=y(d))||u.miss)){u.stun++;var b=r["#"]+u.all++,_={toString:function(){return b},_:u};_.toJSON=_.toString,g&&(g.ph=g.ph||+new Date),s.on("put",{"#":_,"@":r["@"],put:{"#":e,".":n,":":t,">":i},_:u})}}function r(t){var n;(n=(t._||"").DBG)&&(n.pa=+new Date,n.pm=n.pm||+new Date);var e,o=this.as,i=o.graph,r=t._,u=t.put,s=u["#"],c=u["."],f=u[":"],h=u[">"];t["#"];(e=r.msg)&&(e=e.put)&&(e=e[s])&&l(e,c,h,f,s),i[s]=l(i[s],c,h,f,s),(e=(o.next||"")[s])&&e.on("in",t),a(r),this.to.next(t)}function a(n,e){var o;if(!n.stop&&(n.err||!(0<--n.stun))&&(n.stop=1,o=n.root)){var i=n.match;i.end=1,i===o.hatch&&(!(i=n.latch)||i.end?delete o.hatch:o.hatch=i),n.hatch&&n.hatch(),setTimeout.each(n.match,(function(t){t&&t()})),!(e=n.msg)||n.err||e.err||(e.out=t,n.root.on("out",e),_())}}function p(t){t&&t.root&&(t.stun||t.acks!==t.all||t.root.on("in",{"@":t["#"],err:t.err,ok:t.err?i:{"":1}}))}e.create=function(n){n.root=n.root||n,n.graph=n.graph||{},n.on=n.on||e.on,n.ask=n.ask||e.ask,n.dup=n.dup||e.dup();var o=n.$.opt(n.opt);return n.once||(n.on("in",t,n),n.on("out",t,n),n.on("put",r,n),e.on("create",n),n.on("create",n)),n.once=1,o},e.on.put=n;var d,g="Error: Invalid graph!",v=function(t){return" '"+(""+t).slice(0,9)+"...' "},y=JSON.stringify,k=2147483647,m=e.state,b=0,_=function(){b>999&&b/-(d-(d=+new Date))>1&&(e.window&&console.log("Warning: You're syncing 1K+ records a second, faster than DOM can update - consider limiting query."),_=function(){b=0})}}(),function(){function t(t,n){var e=+new Date,o=t._||{},r=o.DBG=t.DBG,a=t["#"],s=u(9),c=Object.keys(n||"").sort(),h=((n||"")._||"")["#"],p=(c.length,t.$._.root),d=n===p.graph[h];console.STAT&&console.STAT(e,((r||o).gk=+new Date)-e,"got keys"),n&&function t(){e=+new Date;for(var o,g,v,y=0,k={};y<9&&(o=c[y++]);)l(k,o,f(n,o),n[o],h);c=c.slice(y),(g={})[h]=k,k=g,d&&((v=function(){}).ram=v.faith=!0),g=c.length,console.STAT&&console.STAT(e,-(e-(e=+new Date)),"got copied some"),r&&(r.ga=+new Date),p.on("in",{"@":a,"#":s,put:k,"%":g?s=u(9):i,$:p.$,_:v,DBG:r}),console.STAT&&console.STAT(e,+new Date-e,"got in"),g&&setTimeout.turn(t)}(),n||p.on("in",{"@":t["#"]})}e.on.get=function(n,e){var o=e._,r=n.get,a=r["#"],u=o.graph[a],s=r["."],c=((o.next||(o.next={}))[a],(n._||{}).DBG=n.DBG);if(c&&(c.g=+new Date),!u)return o.on("get",n);if(s){if("string"!=typeof s||i===u[s])return o.on("get",n);u=l({},s,f(u,s),u[s],a)}u&&t(n,u),o.on("get",n)},e.on.get.ack=t}(),e.chain.opt=function(t){t=t||{};var n=this._,o=t.peers||t;return Object.plain(t)||(t={}),Object.plain(n.opt)||(n.opt=t),"string"==typeof o&&(o=[o]),Object.plain(n.opt.peers)||(n.opt.peers={}),o instanceof Array&&(t.peers={},o.forEach((function(e){var o={};o.id=o.url=e,t.peers[e]=n.opt.peers[e]=n.opt.peers[e]||o}))),a(t,(function t(n){var e=this[n];this&&this.hasOwnProperty(n)||"string"==typeof e||Object.empty(e)?this[n]=e:(!e||e.constructor===Object||e instanceof Array)&&a(e,t)})),n.opt.from=t,e.on("opt",n),n.opt.uuid=n.opt.uuid||function(t){return e.state().toString(36).replace(".","")+String.random(t||12)},this};var i,r,a=function(t,n){Object.keys(t).forEach(n,t)},u=String.random,s=setTimeout.turn,c=e.valid,f=e.state.is,l=e.state.ify,h={};e.log=function(){return!e.log.off&&r.log.apply(r,arguments),[].slice.call(arguments).join(" ")},e.log.once=function(t,n,o){return(o=e.log.once)[t]=o[t]||0,o[t]++||e.log(n)},"undefined"!==typeof window&&((window.GUN=window.Gun=e).window=window);try{"undefined"!==typeof o&&(o.exports=e)}catch(p){}t.exports=e,(e.window||{}).console=(e.window||{}).console||{log:function(){}},(r=console).only=function(t,n){return r.only.i&&t===r.only.i&&r.only.i++&&(r.log.apply(r,arguments)||n)},e.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")}))(n,"./root"),n((function(t){n("./root").chain.back=function(t,n){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var i=this._;if("string"===typeof t&&(t=t.split(".")),t instanceof Array){for(var r=0,a=t.length,u=i;r<a;r++)u=(u||o)[t[r]];return e!==u?n?this:u:(u=i.back)?u.$.back(t,n):void 0}if("function"==typeof t){var s;for(u={back:i};(u=u.back)&&e===(s=t(u,n)););return s}return"number"==typeof t?(i.back||i).$.back(t-1):this};var e,o={}}))(n,"./back"),n((function(t){var e=n("./root");function o(t,n){if(n=n||this.as||t.$._,(!t.$$||this===e.on)&&t.put&&!n.soul){var o=t.put||"",i=o["="]||o[":"],r=n.root,a=r.$.get(o["#"]).get(o["."])._;if("string"==typeof(i=c(i))){if(!(a.echo||(a.echo={}))[n.id]||(r.pass||"")[n.id]){if(u=r.pass){if(u[i+n.id])return;u[i+n.id]=1}(a.echo||(a.echo={}))[n.id]=n,n.has&&(n.link=i);var u,s=r.$.get(a.link=i)._;(s.echo||(s.echo={}))[a.id]=a,((u=n.ask||"")[""]||n.lex)&&s.on("out",{get:{"#":i}}),setTimeout.each(Object.keys(u),(function(t,n){t&&(n=u[t])&&n.on("out",{get:{"#":i,".":t}})}),0,99)}}else this===e.on&&((a.echo||(a.echo={}))[n.id]=n)}}function i(t,n){var e,o,r=t.put||"",u=a!==r["="]?r["="]:r[":"],s=n.root;if(a===u){if(n.soul&&a!==n.put)return;if(o=(t.$$||t.$||"")._||"",t["@"]&&(a!==o.put||a!==n.put))return;return(e=n.link||t.linked)&&delete(s.$.get(e)._.echo||"")[n.id],n.has&&(n.link=null),n.put=a,void setTimeout.each(Object.keys(n.next||""),(function(t,o){(o=n.next[t])&&(e&&delete(s.$.get(e).get(t)._.echo||"")[o.id],o.on("in",{get:t,put:a,$:o.$}))}),0,99)}n.soul||t.$$||(e=c(u),o=t.$._||"",(e!==o.link&&(!n.has||o.link)||(s.pass||"")[n.id]&&"string"!==typeof e)&&(delete(o.echo||"")[n.id],i({get:n.get,put:a,$:t.$,linked:t.linked=t.linked||o.link},n)))}function r(t,n){var o=this.as,i=o.$._,r=(i.root,o.get||""),u=(t.put||"")[r["#"]]||"";if(!t.put||"string"==typeof r["."]&&a===u[r["."]]){if(a!==i.put)return;if(!i.soul&&!i.has)return;return i.ack=(i.ack||0)+1,void i.on("in",{get:i.get,put:i.put=a,$:i.$,"@":t["@"]})}(t._||{}).miss=1,e.on.put(t)}e.chain.chain=function(t){var n,o=this,i=o._,r=new(t||o).constructor(o),a=r._;return a.root=n=i.root,a.id=++n.once,a.back=o._,a.on=e.on,a.on("in",e.on.in,a),a.on("out",e.on.out,a),r},e.on.out=function(t){var n,e,o=this.as,i=o.back,u=o.root;if(t.$||(t.$=o.$),this.to.next(t),!o.err){if(n=t.get){if(u.pass&&(u.pass[o.id]=o),o.lex&&Object.keys(o.lex).forEach((function(t){e[t]=o.lex[t]}),e=t.get=t.get||{}),n["#"]||o.soul){if(n["#"]=n["#"]||o.soul,t["#"]||(t["#"]=s(9)),i=u.$.get(n["#"])._,n=n["."]){if(f(i.put,n)&&(e=i.ask&&i.ask[n],(i.ask||(i.ask={}))[n]=i.$.get(n)._,i.on("in",{get:n,put:{"#":i.soul,".":n,":":i.put[n],">":h(u.graph[i.soul],n)}}),e))return}else{if(e=i.ask&&i.ask[""],(i.ask||(i.ask={}))[""]=i,a!==i.put&&(i.on("in",i),e))return;t.$=i.$}return u.ask(r,t),u.on("in",t)}if(n["."])return o.get?(t={get:{".":o.get},$:o.$},(i.ask||(i.ask={}))[o.get]=t.$._,i.on("out",t)):(t={get:o.lex?t.get:{},$:o.$},i.on("out",t));if((o.ask||(o.ask={}))[""]=o,o.get)return n["."]=o.get,(i.ask||(i.ask={}))[o.get]=t.$._,i.on("out",t)}return i.on("out",t)}o.on("in",{put:o.put=a,$:o.$})},e.on.in=function(t,n){var e,r=(n=n||this.as).root,s=t.$||(t.$=n.$),f=(s||"")._||u,l=t.put||"",d=l["#"],g=l["."],v=a!==l["="]?l["="]:l[":"],y=l[">"]||-1/0;if(a!==t.put&&(a===l["#"]||a===l["."]||a===l[":"]&&a===l["="]||a===l[">"]))return c(l)?void n.on("in",{$:f.back.$,put:{"#":d=f.back.soul,".":g=f.has||f.get,"=":l,">":h(f.back.put,g)},via:t}):(d=((l||"")._||"")["#"])?(s=n.root.$.get(d),setTimeout.each(Object.keys(l).sort(),(function(e){"_"!=e&&a!==(y=h(l,e))&&n.on("in",{$:s,put:{"#":d,".":e,"=":l[e],">":y},VIA:t})}))):void console.log("chain not yet supported for",l,"...",t,n);(t.seen||"")[n.id]||((t.seen||(t.seen=function(){}))[n.id]=n,n!==f&&(Object.keys(t).forEach((function(n){l[n]=t[n]}),l={}),l.get=n.get||l.get,n.soul||n.has?f.soul&&(l.$=n.$,l.$$=l.$$||f.$):l.$$$=l.$$$||n.$,t=l),i(t,n),(n.soul||t.$$)&&y>=h(r.graph[d],g)&&((l=r.$.get(d)._).put=p(l.put,g,y,v,d)),!f.soul&&y>=h(r.graph[d],g)&&(e=(r.$.get(d)._.next||"")[g])&&(e.put=v,"string"==typeof(l=c(v))&&(e.put=r.$.get(l)._.put||v)),this.to&&this.to.next(t),n.any&&setTimeout.each(Object.keys(n.any),(function(e){(e=n.any[e])&&e(t)}),0,99),n.echo&&setTimeout.each(Object.keys(n.echo),(function(e){(e=n.echo[e])&&e.on("in",t)}),0,99),((t.$$||"")._||f).soul&&(e=n.next)&&(e=e[g])&&(l={},Object.keys(t).forEach((function(n){l[n]=t[n]})),l.$=(t.$$||t.$).get(l.get=g),delete l.$$,delete l.$$$,e.on("in",l)),o(t,n))},e.on.link=o,e.on.unlink=i;var a,u={},s=String.random,c=e.valid,f=function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,n)},l=e.state,h=l.is,p=l.ify}))(n,"./chain"),n((function(t){var e=n("./root");function o(t){var n=this.at||this.on;if(!t||n.soul||n.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){var e;n.map;if((e=this.seen||(this.seen={}))[t])return!0;e[t]=!0}}e.chain.get=function(t,n,u){var s,c;if("string"===typeof t){if(0==t.length)return(s=this.chain())._.err={err:e.log("0 length key!",t)},n&&n.call(s,s._.err),s;(s=((l=this._).next||r)[t])||(s=t&&function(t,n){var e=n._,o=e.next,i=n.chain()._;o||(o=e.next={});o[i.get=t]=i,n===e.root.$?i.soul=t:(e.soul||e.has)&&(i.has=t);return i}(t,this)),s=s&&s.$}else{if("function"==typeof t){if(!0===n)return function(t,n,o,r){var a,u=t._,s=0;if(a=u.soul||u.link)return n(a,r,u);if(u.jam)return u.jam.push([n,r]);u.jam=[[n,r]],t.get((function(t,n){if(!(i===t.put&&!u.root.opt.super&&(a=Object.keys(u.root.opt.peers).length)&&++s<=a)){n.rid(t);var o,r=(r=t.$)&&r._||{},c=0;for(a=u.jam,delete u.jam;o=a[c++];){var f=o[0];o=o[1],f&&f(r.link||r.soul||e.valid(t.put)||((t.put||{})._||{})["#"],o,t,n)}}}),{out:{get:{".":!0}}})}(this,t,0,u),this;var f,l=(s=this)._,h=n||{},p=l.root;h.at=l,h.ok=t;var d={};function g(t,n,o){if(!g.stun&&(!(r=p.pass)||r[f])){var r,a=t.$._,u=(t.$$||"")._,s=(u||a).put,c=!a.has&&!a.soul,v={};if((c||i===s)&&(s=i===((r=t.put)||"")["="]?i===(r||"")[":"]?r:r[":"]:r["="]),"string"==typeof(r=e.valid(s))&&(s=i===(r=p.$.get(r)._.put)?h.not?i:s:r),!h.not||i!==s){if(i===h.stun){if((r=p.stun)&&r.on&&(l.$.back((function(t){if(r.on(""+t.id,v={}),(v.run||0)<g.id)return v})),!v.run&&r.on(""+a.id,v={}),!v.run&&u&&r.on(""+u.id,v={}),g.id>v.run&&(v.stun&&!v.stun.end||(v.stun=r.on("stun"),v.stun=v.stun&&v.stun.last),v.stun&&!v.stun.end)))return void((v.stun.add||(v.stun.add={}))[f]=function(){g(t,n,1)});if(i===s&&(o=0),(r=p.hatch)&&!r.end&&i===h.hatch&&!o){if(d[a.$._.id])return;return d[a.$._.id]=1,void r.push((function(){g(t,n,1)}))}d={}}if(p.pass){if(p.pass[f+a.id])return;p.pass[f+a.id]=1}h.on?h.ok.call(a.$,s,a.get,t,n||g):h.v2020?h.ok(t,n||g):(Object.keys(t).forEach((function(n){r[n]=t[n]}),r={}),(t=r).put=s,h.ok.call(h.as,t,n||g))}}}return g.at=l,(l.any||(l.any={}))[f=String.random(7)]=g,g.off=function(){g.stun=1,l.any&&delete l.any[f]},g.rid=o,g.id=h.run||++p.once,c=p.pass,(p.pass={})[f]=1,h.out=h.out||{get:{}},l.on("out",h.out),p.pass=c,s}if("number"==typeof t)return this.get(""+t,n,u);if("string"==typeof(c=a(t)))return this.get(c,n,u);(c=this.get.next)&&(s=c(this,t))}return s?(n&&"function"==typeof n&&s.get(n,u),s):((s=this.chain())._.err={err:e.log("Invalid get request!",t)},n&&n.call(s,s._.err),s)};var i,r={},a=e.valid}))(n,"./get"),n((function(t){var e=n("./root");function o(t,n){if(n){n=(n._||"").id||n;var o,i=t.root.stun||(t.root.stun={on:e.on}),r={};t.stun||(t.stun=i.on("stun",(function(){}))),(o=i.on(""+n))&&o.the.last.next(r),r.run>=t.run||i.on(""+n,(function(n){if(t.stun.end)return this.off(),void this.to.next(n);n.run=n.run||t.run,n.stun=n.stun||t.stun}))}}function i(t){if(t.err)i.end(t.stun,t.root);else if(!t.todo.length&&!t.end&&Object.empty(t.wait)){t.end=1;var n,o=t.$.back(-1)._,r=o.root,a=o.ask((function(n){r.on("ack",n),n.err&&e.log(n),++u>(t.acks||0)&&this.off(),t.ack&&t.ack(n,this)}),t.opt),u=0,s=t.stun;(n=function(){s&&(i.end(s,r),setTimeout.each(Object.keys(s=s.add||""),(function(t){(t=s[t])&&t()})))}).hatch=n,t.via._.on("out",{put:t.out=t.graph,opt:t.opt,"#":a,_:n})}}e.chain.put=function(t,n,a){var f=this,l=f._,h=l.root;(a=a||{}).root=l.root,a.run||(a.run=h.once),o(a,l.id),a.ack=a.ack||n,a.via=a.via||f,a.data=a.data||t,a.soul||(a.soul=l.soul||"string"==typeof n&&n);var p=a.state=a.state||e.state();return"function"==typeof t?(t((function(t){a.data=t,f.put(r,r,a)})),f):a.soul?(a.$=h.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||u,a.ran=a.ran||i,function t(){var n,r,u,f,l,h=a.todo,d=h.pop(),g=d.it;d.ref&&d.ref._.id;if(o(a,d.ref),(f=d.todo)&&(g=g[r=f.pop()],f.length&&h.push(d)),r&&(h.path||(h.path=[])).push(r),!(n=s(g))&&!(l=e.is(g))){if(!Object.plain(g))return void i.err(a,"Invalid data: "+function(t,n){return t&&(n=t.constructor)&&n.name||typeof t}(g)+" at "+(a.via.back((function(t){t.get&&f.push(t.get)}),f=[])||f.join("."))+"."+(h.path||[]).join("."));for(var v=a.seen||(a.seen=[]),y=v.length;y--;)if(g===(f=v[y]).it){n=g=f.link;break}}if(r&&n)d.node=c(d.node,r,p,g);else{if(!a.seen)return void i.err(a,"Data at root of graph must be a node (an object).");a.seen.push(u={it:g,link:{},todo:l?[]:Object.keys(g).sort().reverse(),path:(h.path||[]).slice(),up:d}),d.node=c(d.node,r,p,u.link),!l&&u.todo.length&&h.push(u);var k=a.seen.length;function m(t,n){var e=u.link["#"];n&&(n.off(),n.rid(t));var i=e||t.soul||(f=(t.$$||t.$)._||"").soul||f.link||((f=f.put||"")._||"")["#"]||f["#"]||((f=t.put||"")&&t.$$?f["#"]:(f["="]||f[":"]||"")["#"]);!e&&o(a,t.$),i||d.link["#"]?(i||(i=[],(t.$$||t.$).back((function(t){if(f=t.soul||t.link)return i.push(f);i.push(t.get)})),i=i.reverse().join("/")),u.link["#"]=i,!l&&(((a.graph||(a.graph={}))[i]=u.node||(u.node={_:{}}))._["#"]=i),delete a.wait[k],u.wait&&setTimeout.each(u.wait,(function(t){t&&t()})),a.ran(a)):(d.wait||(d.wait=[])).push((function(){m(t,n)}))}(a.wait||(a.wait={}))[k]="",f=(u.ref=l?g:r?d.ref.get(r):d.ref)._,(f=g&&(g._||"")["#"]||f.soul||f.link)?m({soul:f}):u.ref.get(m,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!h.length)return a.ran(a);a.turn(t)}(),f):(function(t){var n,e=t.via._;t.via=t.via.back((function(e){if(e.soul||!e.get)return e.$;n=t.data,(t.data={})[e.get]=n})),t.via&&t.via._.soul||(t.via=e.root.$.get(((t.data||"")._||"")["#"]||e.$.back("opt.uuid")()));t.via.put(t.data,t.ack,t)}(a),f)},i.end=function(t,n){t.end=a,t.the.to===t&&t===t.the.last&&delete n.stun,t.off()},i.err=function(t,n){(t.ack||a).call(t,t.out={err:t.err=e.log(n)}),t.ran(t)};var r,a=function(){},u=setTimeout.turn,s=e.valid,c=e.state.ify}))(n,"./put"),n((function(t){var e=n("./root");n("./chain"),n("./back"),n("./put"),n("./get"),t.exports=e}))(n,"./index"),n((function(t){var e=n("./index");e.chain.on=function(t,n,e,o){var i,r=this,a=r._;a.root;if("string"===typeof t)return n?(i=a.on(t,n,e||a,o),e&&e.$&&(e.subs||(e.subs=[])).push(i),r):a.on(t);var u=n;return(u=!0===u?{change:!0}:u||{}).not=1,u.on=1,r.get(t,u),r},e.chain.once=function(t,n){if(n=n||{},!t)return function(t,n,o){return e.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(o=t.chain())._.nix=t.once((function(t,n){o._.on("in",this._)})),o._.lex=t._.lex,o}(this);var i,r=this,a=r._,u=a.root,s=(a.put,String.random(7));return r.get((function(r,c,f,l){var h=this,p=h._,d=p.one||(p.one={});function g(v){p.has||p.soul||(p={put:r,get:c}),o===(i=p.put)&&(i=((f.$$||"")._||"").put),"string"!=typeof e.valid(i)||(i=u.$.get(i)._.put)!==o||v?l.stun||""!==d[s]&&(d[s]="",(a.soul||a.has)&&l.off(),t.call(h,i,p.get),clearTimeout(d[s])):d[s]=setTimeout((function(){g(1)}),n.wait||99)}l.stun||""!==d[s]&&(!0!==(i=e.valid(r))?"string"!=typeof i&&(clearTimeout((a.one||"")[s]),clearTimeout(d[s]),d[s]=setTimeout(g,n.wait||99)):g())}),{on:1}),r},e.chain.off=function(){var t,n=this._,e=n.back;if(e)return n.ack=0,(t=e.next)&&t[n.get]&&delete t[n.get],(t=e.ask)&&delete t[n.get],(t=e.put)&&delete t[n.get],(t=n.soul)&&delete e.root.graph[t],(t=n.map)&&Object.keys(t).forEach((function(n,o){(o=t[n]).link&&e.root.$.get(o.link).off()})),(t=n.next)&&Object.keys(t).forEach((function(n,e){t[n].$.off()})),n.on("off",{}),this};var o}))(n,"./on"),n((function(t){var e=n("./index"),o=e.chain.get.next;function i(t){this.to.next(t);var n,o=this.as,i=t.$._,r=t.put;(i.soul||t.$$)&&((n=o.lex)&&!String.match(t.get||(r||"")["."],n["."]||n["#"]||n)||e.on.link(t,o))}e.chain.get.next=function(t,n){var e;return Object.plain(n)?(e=((e=n["#"])||"")["="]||e)?t.get(e):((e=t.chain()._).lex=n,t.on("in",(function(t){String.match(t.get||(t.put||"")["."],n["."]||n["#"]||n)&&e.on("in",t),this.to.next(t)})),e.$):(o||a)(t,n)},e.chain.map=function(t,n,o){var u,s,c=this,f=c._;return Object.plain(t)&&(u=t["."]?t:{".":t},t=r),t?(e.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),s=c.chain(),c.map().on((function(n,o,i,u){var c=(t||a).call(this,n,o,i,u);if(r!==c){if(n===c)return s._.on("in",i);if(e.is(c))return s._.on("in",c._);var f={};Object.keys(i.put).forEach((function(t){f[t]=i.put[t]}),f),f["="]=c,s._.on("in",{get:o,put:f})}})),s):((s=f.each)||((f.each=s=c.chain())._.lex=u||s._.lex||f.lex,s._.nix=c.back("nix"),c.on("in",i,s._)),s)};var r,a=function(){}}))(n,"./map"),n((function(t){var e=n("./index");e.chain.set=function(t,n,o){var i,r,a=this,u=a.back(-1);return n=n||function(){},(o=o||{}).item=o.item||t,(i=((t||"")._||"")["#"])&&((t={})["#"]=i),"string"==typeof(r=e.valid(t))?a.get(i=r).put(t,n,o):e.is(t)?(a.put((function(o){t.get((function(t,i,u){if(!t)return n.call(a,{err:e.log('Only a node can be linked! Not "'+u.put+'"!')});(r={})[t]={"#":t},o(r)}),!0)})),t):(Object.plain(t)&&(t=u.get(i=a.back("opt.uuid")()).put(t)),a.get(i||u.back("opt.uuid")(7)).put(t,n,o))}}))(n,"./set"),n((function(t){n("./shim");var e=function(){},o=JSON.parseAsync||function(t,n,e){var o=+new Date;try{n(undefined,JSON.parse(t,e),i.sucks(+new Date-o))}catch(r){n(r)}},i=JSON.stringifyAsync||function(t,n,e,o){var r=+new Date;try{n(undefined,JSON.stringify(t,e,o),i.sucks(+new Date-r))}catch(a){n(a)}};i.sucks=function(t){t>99&&(console.log("Warning: JSON blocking CPU detected. Add `gun/lib/yson.js` to fix."),i.sucks=e)};var r;try{t.exports=function(t){var n=function(){},e=t.opt||{};e.log=e.log||console.log,e.gap=e.gap||e.wait||0,e.max=e.max||.3*(e.memory?999*e.memory*999:3e8),e.pack=e.pack||.01*e.max*.01,e.puff=e.puff||9;var a=setTimeout.turn||setTimeout,u=t.dup,s=u.check,c=u.track,f=(new Date,n.hear=function(t,i){if(t){if(e.max<=t.length)return n.say({dam:"!",err:"Message too big!"},i);n===this&&(f.d+=t.length||0,++f.c);var r,u=i.SH=+new Date,s=t[0];return"["===s?(o(t,(function(t,o){if(t||!o)return n.say({dam:"!",err:"DAM JSON parse error."},i);console.STAT&&console.STAT(+new Date,o.length,"# on hear batch");var r=e.puff;!function t(){for(var e,u=+new Date,s=0;s<r&&(e=o[s++]);)n.hear(e,i);o=o.slice(s),console.STAT&&console.STAT(u,+new Date-u,"hear loop"),l(i),o.length&&a(t,0)}()})),void(t="")):"{"===s||(t["#"]||Object.plain(t))&&(r=t)?r?f.one(r,i,u):void o(t,(function(t,e){if(t||!e)return n.say({dam:"!",err:"DAM JSON parse error."},i);f.one(e,i,u)})):void 0}});function l(t){var n=t.batch,o="string"==typeof n;if(o&&(n+="]"),t.batch=t.tail=null,n&&!(o?3>n.length:!n.length)){if(!o)try{n=1===n.length?n[0]:JSON.stringify(n)}catch(i){return e.log("DAM JSON stringify error",i)}n&&h(n,t)}}function h(t,e){try{var o=e.wire;e.say?e.say(t):o.send&&o.send(t),n.say.d+=t.length||0,++n.say.c}catch(i){(e.queue=e.queue||[]).push(t)}}f.one=function(e,o,i){var r,a,f,l,h;if(e.DBG&&(e.DBG=h={DBG:e.DBG}),h&&(h.h=i),h&&(h.hp=+new Date),(r=e["#"])||(r=e["#"]=String.random(9)),!(f=s(r))&&!((a=e["##"])&&(f=e["@"]||e.get&&r)&&u.check(l=f+a))){if((e._=function(){}).via=n.leap=o,(f=e["><"])&&"string"==typeof f&&f.slice(0,99).split(",").forEach((function(t){this[t]=1}),e._.yo={}),f=e.dam)return(f=n.hear[f])&&f(e,o,t),void c(r);i=+new Date,h&&(h.is=i),o.SI=r,t.on("in",n.last=e),h&&(h.hd=+new Date),console.STAT&&console.STAT(i,+new Date-i,e.get?"msg get":e.put?"msg put":"msg"),(f=c(r)).via=o,e.get&&(f.it=e),l&&c(l),n.leap=n.last=null}},f.c=f.d=0,function(){var t,o=0;function f(t,n){var e;return n instanceof Object?(Object.keys(n).sort().forEach(p,{to:e={},on:n}),e):n}function p(t){this.to[t]=this.on[t]}n.hash=function(t,e){var o,r,u,s=+new Date;i(t.put,(function i(c,f){var l=(r||(r=u=f||"")).slice(0,32768);o=String.hash(l,o),(r=r.slice(32768))?a(i,0):(console.STAT&&console.STAT(s,+new Date-s,"say json+hash"),t._.$put=u,t["##"]=o,n.say(t,e),delete t._.$put)}),f)},n.say=function(i,s){var f;if((f=this)&&(f=f.to)&&f.next&&f.next(i),!i)return!1;var p,d,g=i["@"],v=i._||(i._=function(){}),y=i.DBG,k=+new Date;if(v.y=v.y||k,s||y&&(y.y=k),(p=i["#"])||(p=i["#"]=String.random(9)),!t&&c(p),i.put&&(i.err||(u.s[p]||"").err))return!1;if(i["##"]||r===i.put||v.via||!g){if(!s&&g&&(s=(f=u.s[g])&&(f.via||(f=f.it)&&(f=f._)&&f.via)||(f=n.last)&&g===f["#"]&&n.leap),!s&&g){if(u.s[g])return;return console.STAT&&console.STAT(+new Date,++o,"total no peer to ack to"),!1}if(!s&&n.way)return n.way(i);if(y&&(y.yh=+new Date),d=v.raw){if(y&&(y.yr=+new Date),!s||!s.id){if(!Object.plain(s||e.peers))return!1;k=+new Date,e.puff;var m=e.peers,b=Object.keys(s||e.peers||{});return console.STAT&&console.STAT(k,+new Date-k,"peer keys"),void function e(){var o=+new Date;t=1;var r=v.raw;v.raw=d;for(var u,s=0;s<9&&(u=(b||"")[s++]);)(u=m[u])&&n.say(i,u);v.raw=r,t=0,b=b.slice(s),console.STAT&&console.STAT(o,+new Date-o,"say loop"),b.length&&(a(e,0),g&&c(g))}()}if(!s.wire&&n.wire&&n.wire(s),p!==s.last){if(s.last=p,s===v.via)return!1;if((f=v.yo)&&(f[s.url]||f[s.pid]||f[s.id]))return!1;if(console.STAT&&console.STAT(k,((y||v).yp=+new Date)-(v.y||k),"say prep"),!t&&g&&c(g),s.batch){if(s.tail=(f=s.tail||0)+d.length,s.tail<=e.pack)return void(s.batch+=(f?",":"")+d);l(s)}s.batch="[";var _=+new Date;setTimeout((function(){console.STAT&&console.STAT(_,+new Date-_,"0ms TO"),l(s)}),e.gap),h(d,s),console.STAT&&g===s.SI&&console.STAT(k,+new Date-s.SH,"say ack")}}else n.raw(i,s)}else n.hash(i,s)},n.say.c=n.say.d=0,n.raw=function(t,o){if(!t)return"";var a,c,f=t._||{};if(c=f.raw)return c;if("string"==typeof t)return t;var l=t["##"],h=t["@"];if(l&&h){if(!f.via&&s(h+l))return!1;if((c=(u.s[h]||"").it)||(c=n.last)&&h===c["#"]){if(l===c["##"])return!1;c["##"]||(c["##"]=l)}}if(!t.dam){var p=0,d=[];for(var g in c=e.peers){var v=c[g];if(d.push(v.url||v.pid||v.id),++p>6)break}p>1&&(t["><"]=d.join())}if(a=f.$put)return c={},Object.keys(t).forEach((function(n){c[n]=t[n]})),c.put=":])([:",void i(c,(function(t,n){if(!t){var e=+new Date;c=n.indexOf('"put":":])([:"'),y(r,n=n.slice(0,c+6)+a+n.slice(c+14)),console.STAT&&console.STAT(e,+new Date-e,"say slice")}}));function y(e,i){e||(f.raw=i,n.say(t,o))}i(t,y)}}(),n.hi=function(o){var i,r=o.wire;r?(o.id?e.peers[o.url||o.id]=o:(i=o.id=o.id||String.random(9),n.say({dam:"?",pid:t.opt.pid},e.peers[i]=o),delete u.s[o.last]),o.met=o.met||+new Date,r.hied||t.on(r.hied="hi",o),i=o.queue,o.queue=[],setTimeout.each(i||[],(function(t){h(t,o)}),0,9)):n.wire(o.length&&{url:o}||o)},n.bye=function(e){t.on("bye",e);var o=+new Date;o-=e.met||o,n.bye.time=((n.bye.time||o)+o)/2},n.hear["!"]=function(t,n){e.log("Error:",t.err)},n.hear["?"]=function(t,o){t.pid&&(o.pid||(o.pid=t.pid),t["@"])||(n.say({dam:"?",pid:e.pid,"@":t["#"]},o),delete u.s[o.last])},t.on("create",(function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",n.say)})),t.on("bye",(function(t,n){t=e.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(n=t.wire)&&n.close&&n.close(),delete e.peers[t.id],t.wire=null}));var p={};return t.on("bye",(function(t,n){this.to.next(t),(n=console.STAT)&&(n.peers=(n.peers||0)-1),(n=t.url)&&(p[n]=!0,setTimeout((function(){delete p[n]}),e.lack||9e3))})),t.on("hi",(function(o,i){this.to.next(o),(i=console.STAT)&&(i.peers=(i.peers||0)+1),(i=o.url)&&p[i]&&(delete p[i],e.super||setTimeout.each(Object.keys(t.next),(function(e){t.next[e],(i={})[e]=t.graph[e],i=String.hash(i),n.say({"##":i,get:{"#":e}},o)})))})),n}}catch(a){}}))(n,"./mesh"),n((function(t){var e=n("../index");e.Mesh=n("./mesh"),e.on("opt",(function(t){if(this.to.next(t),!t.once){var n=t.opt;if(!1!==n.WebSocket){var o=e.window||{},i=n.WebSocket||o.WebSocket||o.webkitWebSocket||o.mozWebSocket;if(i){n.WebSocket=i;var r=n.mesh=n.mesh||e.Mesh(t);r.wire||n.wire;r.wire=n.wire=s,setTimeout((function(){!n.super&&t.on("out",{dam:"hi"})}),1);var a=1998,u=""+undefined!==typeof document&&document}}}function s(t){try{if(!t||!t.url)return o&&o(t);var e=t.url.replace(/^http/,"ws"),o=t.wire=new n.WebSocket(e);return o.onclose=function(){n.mesh.bye(t),c(t)},o.onerror=function(n){c(t)},o.onopen=function(){n.mesh.hi(t)},o.onmessage=function(e){e&&n.mesh.hear(e.data||e,t)},o}catch(i){}}function c(t){clearTimeout(t.defer),n.peers[t.url]&&(u&&t.retry<=0||(t.retry=(t.retry||n.retry+1||60)-(-t.tried+(t.tried=+new Date)<7992?1:0),t.defer=setTimeout((function n(){if(u&&u.hidden)return setTimeout(n,a);s(t)}),a)))}}))}))(n,"./websocket"),n((function(t){if("undefined"!==typeof Gun){var n;try{n=(Gun.window||function(){}).localStorage}catch(o){}n||(Gun.log("Warning: No localStorage exists to persist data to!"),n={setItem:function(t,n){this[t]=n},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}});JSON.parseAsync;var e=JSON.stringifyAsync||function(t,n,e,i){try{n(undefined,JSON.stringify(t,e,i))}catch(o){n(o)}};Gun.on("create",(function t(i){this.to.next(i);var r,a,u,s,c=i.opt,f=(i.graph,[]);if(!1!==c.localStorage){c.prefix=c.file||"gun/";try{r=t[c.prefix]=t[c.prefix]||JSON.parse(u=n.getItem(c.prefix))||{}}catch(o){r=t[c.prefix]={}}u=(u||"").length,i.on("get",(function(t){this.to.next(t);var n,e,o,i=t.get;i&&(n=i["#"])&&((e=r[n]||undefined)&&(o=i["."])&&!Object.plain(o)&&(e=Gun.state.ify({},o,Gun.state.is(e,o),e[o],n)),Gun.on.get.ack(t,e))})),i.on("put",(function(t){this.to.next(t);var n=t.put,e=n["#"],o=n["."],c=t["#"];r[e]=Gun.state.ify(r[e],o,n[">"],n[":"],e),s&&u>4999880?i.on("in",{"@":c,err:"localStorage max!"}):(t["@"]||f.push(c),a||(a=setTimeout(l,9+u/333)))}))}function l(){if(f.length||!((setTimeout.turn||"").s||"").length){var t=f;clearTimeout(a),a=!1,f=[],e(r,(function(e,a){try{!e&&n.setItem(c.prefix,a)}catch(o){e=s=o||"localStorage failure"}e&&(Gun.log(e+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),i.on("localStorage:error",{err:e,get:c.prefix,put:r})),u=a.length,(e||Object.empty(c.peers))&&setTimeout.each(t,(function(t){i.on("in",{"@":t,err:e,ok:0})}),0,99)}))}else setTimeout(l,99)}}))}}))(n,"./localStorage")}(),function(){if(""+w!=typeof Gun){var t=function(t){console.warn("Warning! Deprecated internal utility will break in next version:",t)},n=Gun;n.fn=n.fn||{is:function(n){return t("fn"),!!n&&"function"==typeof n}},n.bi=n.bi||{is:function(n){return t("bi"),n instanceof Boolean||"boolean"==typeof n}},n.num=n.num||{is:function(n){return t("num"),!o(n)&&(n-parseFloat(n)+1>=0||1/0===n||-1/0===n)}},n.text=n.text||{is:function(n){return t("text"),"string"==typeof n}},n.text.ify=n.text.ify||function(e){return t("text.ify"),n.text.is(e)?e:"undefined"!==typeof JSON?JSON.stringify(e):e&&e.toString?e.toString():e},n.text.random=n.text.random||function(n,e){t("text.random");var o="";for(n=n||24,e=e||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";n>0;)o+=e.charAt(Math.floor(Math.random()*e.length)),n--;return o},n.text.match=n.text.match||function(n,e){var o,i;return t("text.match"),"string"===typeof n&&("string"==typeof e&&(e={"=":e}),n===(o=(e=e||{})["="]||e["*"]||e[">"]||e["<"])||i===e["="]&&(o=e["*"]||e[">"]||e["<"],n.slice(0,(o||"").length)===o||i===e["*"]&&(i!==e[">"]&&i!==e["<"]?n>=e[">"]&&n<=e["<"]:i!==e[">"]&&n>=e[">"]||i!==e["<"]&&n<=e["<"])))},n.text.hash=n.text.hash||function(n,e){if(t("text.hash"),"string"===typeof n){if(e=e||0,!n.length)return e;for(var o=0,i=n.length;o<i;++o)e=(e<<5)-e+n.charCodeAt(o),e|=0;return e}},n.list=n.list||{is:function(n){return t("list"),n instanceof Array}},n.list.slit=n.list.slit||Array.prototype.slice,n.list.sort=n.list.sort||function(n){return t("list.sort"),function(t,e){return t&&e?(t=t[n])<(e=e[n])?-1:t>e?1:0:0}},n.list.map=n.list.map||function(n,e,o){return t("list.map"),a(n,e,o)},n.list.index=1,n.obj=n.boj||{is:function(n){return t("obj"),!!n&&(n instanceof Object&&n.constructor===Object||"Object"===Object.prototype.toString.call(n).match(/^\[object (\w+)\]$/)[1])}},n.obj.put=n.obj.put||function(n,e,o){return t("obj.put"),(n||{})[e]=o,n},n.obj.has=n.obj.has||function(n,e){return t("obj.has"),n&&Object.prototype.hasOwnProperty.call(n,e)},n.obj.del=n.obj.del||function(n,e){if(t("obj.del"),n)return n[e]=null,delete n[e],n},n.obj.as=n.obj.as||function(n,e,o,i){return t("obj.as"),n[e]=n[e]||(i===o?{}:o)},n.obj.ify=n.obj.ify||function(n){if(t("obj.ify"),i(n))return n;try{n=JSON.parse(n)}catch(e){n={}}return n},function(){function e(t,n){r(this,n)&&undefined!==this[n]||(this[n]=t)}n.obj.to=n.obj.to||function(n,o){return t("obj.to"),a(n,e,o=o||{}),o}}(),n.obj.copy=n.obj.copy||function(n){return t("obj.copy"),n?JSON.parse(JSON.stringify(n)):n},function(){function e(t,n){var e=this.n;if(!e||!(n===e||i(e)&&r(e,n)))return undefined!==n||void 0}n.obj.empty=n.obj.empty||function(n,o){return t("obj.empty"),!n||!a(n,e,{n:o})}}(),function(){function e(t,n){if(2===arguments.length)return e.r=e.r||{},void(e.r[t]=n);e.r=e.r||[],e.r.push(t)}var a,u=Object.keys;Object.keys=Object.keys||function(t){return a(t,(function(t,n,e){e(n)}))},n.obj.map=a=n.obj.map||function(a,s,c){t("obj.map");var f,l,h,p,d,g=0,v="function"==typeof s;if(e.r=f,u&&i(a)&&(p=u(a),d=!0),c=c||{},o(a)||p)for(l=(p||a).length;g<l;g++){var y=g+n.list.index;if(v){if((h=d?s.call(c,a[p[g]],p[g],e):s.call(c,a[g],y,e))!==f)return h}else if(s===a[d?p[g]:g])return p?p[g]:y}else for(g in a)if(v){if(r(a,g)&&(h=c?s.call(c,a[g],g,e):s(a[g],g,e))!==f)return h}else if(s===a[g])return g;return v?e.r:n.list.index?0:-1}}(),n.time=n.time||{},n.time.is=n.time.is||function(n){return t("time"),n?n instanceof Date:+(new Date).getTime()};var e=n.fn.is,o=n.list.is,i=(_=n.obj).is,r=_.has,a=_.map,u={is:function(n){return t("val.is"),n!==w&&(null===n||n!==1/0&&(!!(l(n)||c(n)||f(n))||(u.link.is(n)||!1)))}};u.link=u.rel={_:"#"},function(){function n(t,n){var e=this;return e.id?e.id=!1:n==s&&l(t)?void(e.id=t):e.id=!1}u.link.is=function(e){if(t("val.link.is"),e&&e[s]&&!e._&&i(e)){var o={};if(a(e,n,o),o.id)return o.id}return!1}}(),u.link.ify=function(n){return t("val.link.ify"),h({},s,n)},n.obj.has._=".";var s=u.link._,c=n.bi.is,f=n.num.is,l=n.text.is,h=(i=(_=n.obj).is,_.put);a=_.map;n.val=n.val||u;var p={_:"_",soul:function(n,e){return t("node.soul"),n&&n._&&n._[e||v]}};p.soul.ify=function(n,e){return t("node.soul.ify"),e="string"===typeof e?{soul:e}:e||{},(n=n||{})._=n._||{},n._[v]=e.soul||n._[v]||g(),n},p.soul._=u.link._,function(){function n(t,n){if(n!==p._)return!u.is(t)||void(this.cb&&this.cb.call(this.as,t,n,this.n,this.s))}p.is=function(e,o,r){var u;return t("node.is"),!!i(e)&&(!!(u=p.soul(e))&&!a(e,n,{as:r,cb:o,s:u,n:e}))}}(),function(){function n(t,n){var e,o=this.o;o.map?undefined===(e=o.map.call(this.as,t,""+n,o.node))?d(o.node,n):o.node&&(o.node[n]=e):u.is(t)&&(o.node[n]=t)}p.ify=function(e,o,i){return t("node.ify"),o?"string"===typeof o?o={soul:o}:"function"==typeof o&&(o={map:o}):o={},o.map&&(o.node=o.map.call(i,e,w,o.node||{})),(o.node=p.soul.ify(o.node||{},o))&&a(e,n,{o:o,as:i}),o.node}}();i=(_=n.obj).is;var d=_.del,g=(a=_.map,n.text.random),v=p.soul._;n.node=n.node||p;var y=n.state;y.lex=function(){return t("state.lex"),y().toString(36).replace(".","")},y.to=function(n,e,o){t("state.to");var r=(n||{})[e];return i(r)&&(r=k(r)),y.ify(o,e,y.is(n,e),r,p.soul(n))},function(){function n(t,n){m!==n&&y.ify(this.o,n,this.s)}y.map=function(o,u,s){var c;t("state.map");var l=i(l=o||u)?l:null;return o=e(o=o||u)?o:null,l&&!o?(u=f(u)?u:y(),l[m]=l[m]||{},a(l,n,{o:l,s:u}),l):(s=s||i(u)?u:c,u=f(u)?u:y(),function(t,e,i,a){if(!o)return n.call({o:i,s:u},t,e),t;o.call(s||this||{},t,e,i,a),r(i,e)&&c===i[e]||n.call({o:i,s:u},t,e)})}}();(_=n.obj).as,r=_.has,i=_.is,a=_.map;var k=_.copy,m=(f=n.num.is,e=n.fn.is,p._),b={};!function(){function n(t,n){if(!t||n!==p.soul(t)||!p.is(t,this.fn,this.as))return!0;this.cb&&(e.n=t,e.as=this.as,this.cb.call(e.as,t,n,e))}function e(t){t&&p.is(e.n,t,e.as)}b.is=function(e,o,r,u){return t("graph.is"),!(!e||!i(e)||$(e))&&!a(e,n,{cb:o,fn:r,as:u})}}(),function(){function e(t,n){var e;return(e=function(t,n){var e,o=t.seen,i=o.length;for(;i--;)if(e=o[i],n.obj===e.obj)return e;o.push(n)}(t,n))?e:(n.env=t,n.soul=a,p.ify(n.obj,o,n)&&(n.link=n.link||u.link.ify(p.soul(n.node)),n.obj!==t.shell&&(t.graph[u.link.is(n.link)]=n.node)),n)}function o(t,n,o){var i,a,c=this,f=c.env;if(p._===n&&r(t,u.link._))return o._;if(i=s(t,n,o,c,f)){if(n||(c.node=c.node||o||{},r(t,p._)&&p.soul(t)&&(c.node._=k(t._)),c.node=p.soul.ify(c.node,u.link.is(c.link)),c.link=c.link||u.link.ify(p.soul(c.node))),(a=f.map)&&(a.call(f.as||{},t,n,o,c),r(o,n))){if(t=o[n],w===t)return void d(o,n);if(!(i=s(t,n,o,c,f)))return}if(!n)return c.node;if(!0===i)return t;if((a=e(f,{obj:t,path:c.path.concat(n)})).node)return a.link}}function a(t){var n=this,e=u.link.is(n.link),o=n.env.graph;n.link=n.link||u.link.ify(t),n.link[u.link._]=t,n.node&&n.node[p._]&&(n.node[p._][u.link._]=t),r(o,e)&&(o[t]=o[e],d(o,e))}function s(t,e,o,r,a){var c;return!!u.is(t)||(i(t)?1:(c=a.invalid)?s(t=c.call(a.as||{},t,e,o),e,o,r,a):(a.err="Invalid value at '"+r.path.concat(e).join(".")+"'!",void(n.list.is(t)&&(a.err+=" Use `.set(item)` instead of an Array."))))}b.ify=function(n,o,i){t("graph.ify");var r={path:[],obj:n};return o?"string"===typeof o?o={soul:o}:"function"==typeof o&&(o.map=o):o={},"string"===typeof i&&(o.soul=o.soul||i,i=w),o.soul&&(r.link=u.link.ify(o.soul)),o.shell=(i||{}).shell,o.graph=o.graph||{},o.seen=o.seen||[],o.as=o.as||i,e(o,r),o.root=r.node,o.graph}}(),b.node=function(n){t("graph.node");var e=p.soul(n);if(e)return h({},e,n)},function(){function n(t,n){var e,o;if(p._!==n)(e=u.link.is(t))?(o=this.opt.seen[e])?this.obj[n]=o:this.obj[n]=this.opt.seen[e]=b.to(this.graph,e,this.opt):this.obj[n]=t;else{if($(t,u.link._))return;this.obj[n]=k(t)}}b.to=function(e,o,i){if(t("graph.to"),e){var r={};return i=i||{seen:{}},a(e[o],n,{obj:r,graph:e,opt:i}),r}}}();e=n.fn.is,i=(_=n.obj).is,d=_.del,r=_.has;var _,w,$=_.empty;h=_.put,a=_.map,k=_.copy;n.graph=n.graph||b}}()},89857:function(t,n,e){var o="undefined"!==typeof window?window.Gun:e(59616);o.chain.open=function(t,n,e,i){return i=i||1,(n=n||{}).doc=n.doc||{},n.ids=n.ids||{},n.any=n.any||t,n.meta=n.meta||!1,n.eve=n.eve||{off:function(){Object.keys(n.eve.s).forEach((function(t,e){(e=n.eve.s[t])&&e.off()})),n.eve.s={}},s:{}},this.on((function(t,r,a,u){if(clearTimeout(n.to),n.to=setTimeout((function(){n.any&&(n.any.call(n.at.$,n.doc,n.key,n,n.eve),n.off&&(n.eve.off(),n.any=null))}),n.wait||9),n.at=n.at||a,n.key=n.key||r,n.eve.s[this._.id]=u,!0!==o.valid(t)){var s=this;setTimeout.each(Object.keys(t),(function(r,a){if("_"!==r||n.meta){a=t[r];var u,c=e||n.doc;c&&("string"===typeof(u=o.valid(a))?n.ids[u]?c[r]=n.ids[u]:n.depth<=i?c[r]=c[r]||a:s.get(r).open(n.any,n,n.ids[u]=c[r]={},i+1):c[r]=a)}}))}else e?e[r]=t:n.doc=t}))}}}]);